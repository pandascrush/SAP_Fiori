/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Control","sap/f/library","sap/m/library","sap/ui/core/InvisibleText","sap/m/BadgeEnabler","sap/f/CardRenderer","sap/ui/core/Lib"],function(e,t,i,a,r,n,o){"use strict";var s=i.BadgeState;var g=3e3;var d=e.extend("sap.f.CardBase",{metadata:{library:"sap.f",interfaces:["sap.f.ICard","sap.m.IBadge"],properties:{width:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"100%"},height:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"auto"}},aggregations:{}},renderer:n});r.call(d.prototype);d.prototype.init=function(){this._oRb=o.getResourceBundleFor("sap.f");this._ariaContentText=new a({id:this.getId()+"-ariaContentText"});this._ariaContentText.setText(this._oRb.getText("ARIA_LABEL_CARD_CONTENT"));this._ariaText=new a({id:this.getId()+"-ariaText"});this._ariaText.setText(this._oRb.getText("ARIA_ROLEDESCRIPTION_CARD"));this.initBadgeEnablement()};d.prototype.exit=function(){this._oRb=null;if(this._ariaContentText){this._ariaContentText.destroy();this._ariaContentText=null}if(this._ariaText){this._ariaText.destroy();this._ariaText=null}};d.prototype.setAggregation=function(t,i){var a;if(t==="header"||t==="_header"){a=this.getAggregation(t);if(a){a.detachEvent("_change",this._onHeaderVisibilityChange,this)}if(i){i.attachEvent("_change",this._onHeaderVisibilityChange,this)}}return e.prototype.setAggregation.apply(this,arguments)};d.prototype._onHeaderVisibilityChange=function(e){if(e.getParameters().name==="visible"){setTimeout(function(){this.invalidate()}.bind(this),0)}};d.prototype.getCardHeader=function(){return null};d.prototype.getCardHeaderPosition=function(){return null};d.prototype.getCardContent=function(){return null};d.prototype.getFocusDomRef=function(){return this.getCardHeader()?this.getCardHeader().getFocusDomRef():this.getDomRef()};d.prototype.onmousedown=function(){this._hideBadge()};d.prototype.onsapenter=function(){this._hideBadge()};d.prototype.onfocusin=function(){this._startBadgeHiding()};d.prototype._startBadgeHiding=function(){if(this._iHideBadgeTimeout){return}this._iHideBadgeTimeout=setTimeout(this._hideBadge.bind(this),g)};d.prototype._hideBadge=function(){var e=this.getBadgeCustomData();if(e){e.setVisible(false)}this._iHideBadgeTimeout=null};d.prototype.onBadgeUpdate=function(e,t,i){var a=this.getCardHeader(),r,n;if(a){r=a.getFocusDomRef()}else{r=this.getDomRef("contentSection")}if(!r){return}n=r.getAttribute("aria-labelledby")||"";switch(t){case s.Appear:n=i+" "+n;r.setAttribute("aria-labelledby",n);break;case s.Disappear:n=n.replace(i,"").trim();r.setAttribute("aria-labelledby",n);break}};d.prototype.getAriaLabelBadgeText=function(){return this.getBadgeCustomData().getValue()};d.prototype._getAriaLabelledIds=function(){var e=this.getCardHeader();const t=this._getBlockingMessageAriaLabelledByIds();if(e){if(this._isInsideGridContainer()){if(t){return e._getAriaLabelledBy()+" "+t}return e._getAriaLabelledBy()}if(e._getTitle&&e._getTitle()){if(t){return e._getTitle().getId()+" "+t}return e._getTitle().getId()}}return this._ariaText.getId()};d.prototype._getBlockingMessageAriaLabelledByIds=function(){if(!this.getCardContent()?.getAggregation("_blockingMessage")){return""}const e=this.getCardContent().getAggregation("_blockingMessage")._getIllustratedMessage();const t=e._getTitle().sId;const i=e._getDescription()?.sId;if(e._getDescription().getText()){return t+" "+i}return t};d.prototype._isInsideGridContainer=function(){var e=this.getParent();return e&&e.isA("sap.f.GridContainer")};d.prototype.getAriaRoleDescription=function(){var e=this.getCardHeader();if(e){return e.getAriaRoleDescription()}return null};return d});
//# sourceMappingURL=CardBase.js.map